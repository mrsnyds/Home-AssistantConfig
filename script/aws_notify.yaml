# "All Gone" scripts fire when nobody is home but select devices are on.
# In the time frame between 18:00 - 23:00 when random lights are on, 
# the SMS is only sent if some device other than random lights are on.
# So the automation that calls these scripts selects "All Gone Not Random",
# or "All Gone Random", based on the time of day, and then a condition
# the "Random" script suppresses a message if only random lights are on.
all_gone_not_random:
  alias: All Gone Not Random
  sequence:  
    service: notify.aws_lambda_1      
    data_template:
      target: 'arn:aws:lambda:us-west-2:152624716237:function:myPythonSMS'
      message: >  
        MESSAGE FROM YOUR HOUSE: Nobody (that we track) has been home for over
        15 minutes, but stuff is on.  Check here:
        https://mrsnyds.duckdns.org:8123/lovelace/0
all_gone_random:
  alias: All Gone Random
  sequence: 
  - condition: template
    value_template: '{{ is_state("group.not_home_random", "on") }}'
  - service: notify.aws_lambda_1
    data_template:
      target: 'arn:aws:lambda:us-west-2:152624716237:function:myPythonSMS'
      message: >  
        MESSAGE FROM YOUR HOUSE: I am turning your lights on and off randomly,
        which means you are away, but other stuff should be off.  Check here:
        https://mrsnyds.duckdns.org:8123/lovelace/0 
